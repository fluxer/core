# Maintainer: Ivailo Monev <xakepa10@gmail.com>

# FIXME: python-pygobject must have gobject introspection support
# http://www.linuxfromscratch.org/blfs/view/svn/general/upower.html

version=20151224
description="Abstraction for enumerating power devices, listening to device events and querying history and statistics"
depends=('libgudev' 'libusbx' 'pm-utils' 'dbus-glib' 'libimobiledevice')
makedepends=('intltool' 'docbook-xsl')
sources=("https://github.com/fluxer/upower.git")
# checkdepends=('python' 'gobject-introspection' 'python-pygobject')

src_compile() {
    cd "$SOURCE_DIR/upower.git"

    ./autogen.sh --prefix=/usr \
        --sysconfdir=/etc \
        --localstatedir=/var \
        --libexecdir=/usr/lib/upower \
        --disable-static \
        --enable-deprecated \
        --with-udevrulesdir=/lib/udev/rules.d \
        --disable-nls
    make
}

#src_check() {
#    cd "$SOURCE_DIR/upower.git"
#    make check
#}

src_install() {
    cd "$SOURCE_DIR/upower.git"
    make DESTDIR="$INSTALL_DIR" install
}
