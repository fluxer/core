version=1.7
description='Open Source H265/HEVC video encoder'
depends=('gcc')
makedepends=('yasm' 'cmake')
sources=("https://bitbucket.org/multicoreware/x265/get/$version.tar.bz2")
options=('!mirror')

src_compile() {
    cd multicoreware-x265-*/build/linux
    [ "$(uname -m)" = "x86_64" ] && LDFLAGS+=',-z,noexecstack'
    cmake ../../source \
        -DCMAKE_INSTALL_PREFIX=/usr
    make
}

src_install() {
    cd multicoreware-x265-*/build/linux
    make DESTDIR="$INSTALL_DIR" install
}
