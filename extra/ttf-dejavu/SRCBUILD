# Maintainer: Ivailo Monev <xakepa10@gmail.com>

version=2.34
description="Font family based on the Bitstream Vera Fonts with a wider range of characters"
depends=('fontconfig' 'xorg-fonts' 'xorg-applications')
sources=("http://downloads.sf.net/dejavu/dejavu-fonts-ttf-$version.tar.bz2")

src_install() {
    install -vdm755 "$INSTALL_DIR/etc/fonts/conf.avail" "$INSTALL_DIR/usr/share/fonts/TTF"

    cd "$SOURCE_DIR/dejavu-fonts-ttf-$version"
    install -vm644 ttf/*.ttf "$INSTALL_DIR/usr/share/fonts/TTF/"
    install -vm644 fontconfig/*.conf "$INSTALL_DIR/etc/fonts/conf.avail/"
}

post_install() {
    echo " >> Updating font cache. This may take a while..."
    fc-cache --force

    echo " >> Creating fonts directories..."
    mkfontscale /usr/share/fonts/TTF
    mkfontdir /usr/share/fonts/TTF
}

post_upgrade() {
    post_install
}

post_remove() {
    echo " >> Updating font cache. This may take a while..."
    fc-cache --force
}
