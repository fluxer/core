# Maintainer: Ivailo Monev <xakepa10gmail.com>

version=1.5.4
description="A library for handling OpenGL function pointer management for you"
depends=('glibc')
makedepends=('xorg-makeutils' 'python' 'mesalib')
sources=("https://github.com/anholt/libepoxy/releases/download/$version/libepoxy-$version.tar.xz")

src_prepare() {
    cd "$SOURCE_DIR/libepoxy-$version"
    autoreconf -fi
}

src_compile() {
    cd "$SOURCE_DIR/libepoxy-$version"

    PYTHON=/usr/bin/python ./configure --prefix=/usr
    make
}

src_check() {
    cd "$SOURCE_DIR/libepoxy-$version"
    make check
}

src_install() {
    cd "$SOURCE_DIR/libepoxy-$version"
    make DESTDIR="$INSTALL_DIR" install
}

