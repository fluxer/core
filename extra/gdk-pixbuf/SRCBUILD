# Maintainer: Ivailo Monev <xakepa10@gmail.com>

# TODO: introspection
# http://www.linuxfromscratch.org/blfs/view/svn/x/gdk-pixbuf.html

version=2.42.2
description="An image loading library"
depends=('glib' 'libpng' 'libtiff' 'libjpeg-turbo' 'xorg-libraries')
makedepends=('xorg-protocol-headers' 'meson')
sources=("http://download.gnome.org/sources/gdk-pixbuf/2.42/gdk-pixbuf-$version.tar.xz")

src_compile() {
    cd "$SOURCE_DIR/gdk-pixbuf-$version"

    meson ../build --buildtype plain \
        --prefix /usr
    ninja -C ../build
}

src_install() {
    cd "$SOURCE_DIR/gdk-pixbuf-$version"
    DESTDIR="$INSTALL_DIR" ninja -C ../build install
}

pre_remove() {
    rm -vf /usr/lib/gdk-pixbuf-2.0/2.10.0/loaders/loaders.cache
}
