# Maintainer: Ivailo Monev <xakepa10@gmail.com>

version=3.2
description="A program for creating, destroying, resizing, checking and copying partitions"
depends=('e2fsprogs')
sources=("http://ftp.gnu.org/gnu/parted/parted-$version.tar.xz"
        "http://ftp.gnu.org/gnu/parted/parted-$version.tar.xz.sig"
        'parted-3.2-devmapper.patch')
pgpkeys=('8E45A0223348AAF0')

src_compile() {
    cd "$SOURCE_DIR/parted-$version"

    patch -Np1 -i "$SOURCE_DIR/parted-3.2-devmapper.patch"

    ./configure --prefix=/usr \
        --disable-rpath \
        --disable-device-mapper \
        --disable-nls \
        --disable-static
    make
}

src_install() {
    cd "$SOURCE_DIR/parted-$version"
    make DESTDIR="$INSTALL_DIR" install
}
