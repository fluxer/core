# Maintainer: Ivailo Monev <xakepa10@gmail.com>

version=0.29.1
description='Video player based on MPlayer/mplayer2'
depends=('ffmpeg' 'lcms2' 'libdvdread' 'xorg-libraries'
         'mpg123' 'libdvdnav' 'hicolor-icon-theme' 'luajit'
         'libass' 'libbluray')
makedepends=('mesalib' 'python')
options=('!mirror')
sources=("https://github.com/mpv-player/mpv/archive/v$version.tar.gz")

src_prepare() {
    cd "$SOURCE_DIR/mpv-$version"
    curl https://waf.io/waf-2.0.15 > waf
}

src_compile() {
    cd "$SOURCE_DIR/mpv-$version"

    # python ./bootstrap.py
    python ./waf configure --prefix=/usr \
        --confdir=/etc/mpv \
        --enable-libmpv-shared \
        --enable-lua
    python ./waf build
}

src_install() {
    cd "$SOURCE_DIR/mpv-$version"
    python ./waf install --destdir="$INSTALL_DIR"
}
