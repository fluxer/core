# Maintainer: Ivailo Monev <xakepa10@gmail.com>

# http://www.linuxfromscratch.org/blfs/view/svn/general/zip.html

version=3.0
description="Creates PKZIP-compatible .zip files"
depends=('bzip2')
sources=("http://downloads.sourceforge.net/infozip/zip30.tar.gz"
        'format-security.patch')

src_compile() {
    cd "$SOURCE_DIR/zip30"
    
    patch -p0 -i "$SOURCE_DIR/format-security.patch"
    
    make -j1 -f unix/Makefile LOCAL_ZIP="$CFLAGS $CPPFLAGS" prefix=/usr generic_gcc
}

src_install() {
    cd "$SOURCE_DIR/zip30"
    make -j1 -f unix/Makefile install \
        INSTALL=/bin/install prefix="$INSTALL_DIR/usr" \
        MANDIR=$INSTALL_DIR/usr/share/man/man1
}
