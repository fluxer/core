# Maintainer: Ivailo Monev <xakepa10@gmail.com>

# http://www.linuxfromscratch.org/blfs/view/svn/general/qca.html

version=2.1.1
description="Qt Cryptographic Architecture"
depends=('katie' 'ca-certificates' 'nss')
makedepends=('cmake' 'git')
sources=("https://github.com/fluxer/qca.git")

src_compile() {
    mkdir -p build && cd build
    cmake ../qca.git \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DCMAKE_BUILD_TYPE=RelWithDbgInfo \
        -DBUILD_TESTS=OFF \
        -DQCA_LIBRARY_INSTALL_DIR=/usr/lib \
        -DQCA_FEATURE_INSTALL_DIR=/usr/share/katie/mkspecs/features/ \
        -DKATIE_BUILD=ON
    make
}

src_install() {
    cd "$SOURCE_DIR/build"
    make DESTDIR="$INSTALL_DIR" install
}
